import{r as p,R as L}from"./app-8d2b419d.js";import{O as Q,U as $,y as D,o as v,s as V,u as K,d as T,C as E,p as B,a as G,l as C,c as A}from"./transition-ffe475d1.js";import{y as j,I as _,h as H,T as J,a as m,r as W,_ as z,M as N,D as q,b as X}from"./keyboard-55d2b3bd.js";import{n as Y}from"./use-owner-e8bbfa71.js";import{T as Z}from"./use-resolve-button-type-81844bc5.js";import{s as ee}from"./use-text-value-80c5dc57.js";import{u as te,c as g,f as re}from"./calculate-active-index-17ed5dbe.js";import{F as ne}from"./use-tree-walker-f9bef2e7.js";var ae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ae||{}),oe=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(oe||{}),ue=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(ue||{});function F(e,i=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,n=X(i(e.items.slice()),s=>s.dataRef.current.domRef.current),a=o?n.indexOf(o):null;return a===-1&&(a=null),{items:n,activeItemIndex:a}}let ie={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,i)=>{var o;let n=F(e),a=re(i,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:a,activationTrigger:(o=i.trigger)!=null?o:1}},3:(e,i)=>{let o=e.searchQuery!==""?0:1,n=e.searchQuery+i.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(u=>{var t;return((t=u.dataRef.current.textValue)==null?void 0:t.startsWith(n))&&!u.dataRef.current.disabled}),s=a?e.items.indexOf(a):-1;return s===-1||s===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:s,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,i)=>{let o=F(e,n=>[...n,{id:i.id,dataRef:i.dataRef}]);return{...e,...o}},6:(e,i)=>{let o=F(e,n=>{let a=n.findIndex(s=>s.id===i.id);return a!==-1&&n.splice(a,1),n});return{...e,...o,activationTrigger:1}}},O=p.createContext(null);O.displayName="MenuContext";function k(e){let i=p.useContext(O);if(i===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,k),o}return i}function se(e,i){return K(i.type,ie,e,i)}let le=p.Fragment;function ce(e,i){let{__demoMode:o=!1,...n}=e,a=p.useReducer(se,{__demoMode:o,menuState:o?0:1,buttonRef:p.createRef(),itemsRef:p.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsRef:u,buttonRef:t},l]=a,f=D(i);j([t,u],(b,h)=>{var c;l({type:1}),H(h,J.Loose)||(b.preventDefault(),(c=t.current)==null||c.focus())},s===0);let y=v(()=>{l({type:1})}),R=p.useMemo(()=>({open:s===0,close:y}),[s,y]),I={ref:f};return L.createElement(O.Provider,{value:a},L.createElement(V,{value:K(s,{0:T.Open,1:T.Closed})},E({ourProps:I,theirProps:n,slot:R,defaultTag:le,name:"Menu"})))}let me="button";function de(e,i){var o;let n=_(),{id:a=`headlessui-menu-button-${n}`,...s}=e,[u,t]=k("Menu.Button"),l=D(u.buttonRef,i),f=B(),y=v(c=>{switch(c.key){case m.Space:case m.Enter:case m.ArrowDown:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:g.First}));break;case m.ArrowUp:c.preventDefault(),c.stopPropagation(),t({type:0}),f.nextFrame(()=>t({type:2,focus:g.Last}));break}}),R=v(c=>{switch(c.key){case m.Space:c.preventDefault();break}}),I=v(c=>{if(W(c.currentTarget))return c.preventDefault();e.disabled||(u.menuState===0?(t({type:1}),f.nextFrame(()=>{var x;return(x=u.buttonRef.current)==null?void 0:x.focus({preventScroll:!0})})):(c.preventDefault(),t({type:0})))}),b=p.useMemo(()=>({open:u.menuState===0}),[u]),h={ref:l,id:a,type:Z(e,u.buttonRef),"aria-haspopup":"menu","aria-controls":(o=u.itemsRef.current)==null?void 0:o.id,"aria-expanded":u.menuState===0,onKeyDown:y,onKeyUp:R,onClick:I};return E({ourProps:h,theirProps:s,slot:b,defaultTag:me,name:"Menu.Button"})}let pe="div",fe=Q.RenderStrategy|Q.Static;function ve(e,i){var o,n;let a=_(),{id:s=`headlessui-menu-items-${a}`,...u}=e,[t,l]=k("Menu.Items"),f=D(t.itemsRef,i),y=Y(t.itemsRef),R=B(),I=G(),b=(()=>I!==null?(I&T.Open)===T.Open:t.menuState===0)();p.useEffect(()=>{let r=t.itemsRef.current;r&&t.menuState===0&&r!==(y==null?void 0:y.activeElement)&&r.focus({preventScroll:!0})},[t.menuState,t.itemsRef,y]),ne({container:t.itemsRef.current,enabled:t.menuState===0,accept(r){return r.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:r.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(r){r.setAttribute("role","none")}});let h=v(r=>{var S,P;switch(R.dispose(),r.key){case m.Space:if(t.searchQuery!=="")return r.preventDefault(),r.stopPropagation(),l({type:3,value:r.key});case m.Enter:if(r.preventDefault(),r.stopPropagation(),l({type:1}),t.activeItemIndex!==null){let{dataRef:d}=t.items[t.activeItemIndex];(P=(S=d.current)==null?void 0:S.domRef.current)==null||P.click()}q(t.buttonRef.current);break;case m.ArrowDown:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Next});case m.ArrowUp:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Previous});case m.Home:case m.PageUp:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.First});case m.End:case m.PageDown:return r.preventDefault(),r.stopPropagation(),l({type:2,focus:g.Last});case m.Escape:r.preventDefault(),r.stopPropagation(),l({type:1}),A().nextFrame(()=>{var d;return(d=t.buttonRef.current)==null?void 0:d.focus({preventScroll:!0})});break;case m.Tab:r.preventDefault(),r.stopPropagation(),l({type:1}),A().nextFrame(()=>{z(t.buttonRef.current,r.shiftKey?N.Previous:N.Next)});break;default:r.key.length===1&&(l({type:3,value:r.key}),R.setTimeout(()=>l({type:4}),350));break}}),c=v(r=>{switch(r.key){case m.Space:r.preventDefault();break}}),x=p.useMemo(()=>({open:t.menuState===0}),[t]),M={"aria-activedescendant":t.activeItemIndex===null||(o=t.items[t.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(n=t.buttonRef.current)==null?void 0:n.id,id:s,onKeyDown:h,onKeyUp:c,role:"menu",tabIndex:0,ref:f};return E({ourProps:M,theirProps:u,slot:x,defaultTag:pe,features:fe,visible:b,name:"Menu.Items"})}let Ie=p.Fragment;function ye(e,i){let o=_(),{id:n=`headlessui-menu-item-${o}`,disabled:a=!1,...s}=e,[u,t]=k("Menu.Item"),l=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===n:!1,f=p.useRef(null),y=D(i,f);C(()=>{if(u.__demoMode||u.menuState!==0||!l||u.activationTrigger===0)return;let d=A();return d.requestAnimationFrame(()=>{var w,U;(U=(w=f.current)==null?void 0:w.scrollIntoView)==null||U.call(w,{block:"nearest"})}),d.dispose},[u.__demoMode,f,l,u.menuState,u.activationTrigger,u.activeItemIndex]);let R=ee(f),I=p.useRef({disabled:a,domRef:f,get textValue(){return R()}});C(()=>{I.current.disabled=a},[I,a]),C(()=>(t({type:5,id:n,dataRef:I}),()=>t({type:6,id:n})),[I,n]);let b=v(()=>{t({type:1})}),h=v(d=>{if(a)return d.preventDefault();t({type:1}),q(u.buttonRef.current)}),c=v(()=>{if(a)return t({type:2,focus:g.Nothing});t({type:2,focus:g.Specific,id:n})}),x=te(),M=v(d=>x.update(d)),r=v(d=>{x.wasMoved(d)&&(a||l||t({type:2,focus:g.Specific,id:n,trigger:0}))}),S=v(d=>{x.wasMoved(d)&&(a||l&&t({type:2,focus:g.Nothing}))}),P=p.useMemo(()=>({active:l,disabled:a,close:b}),[l,a,b]);return E({ourProps:{id:n,ref:y,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,disabled:void 0,onClick:h,onFocus:c,onPointerEnter:M,onMouseEnter:M,onPointerMove:r,onMouseMove:r,onPointerLeave:S,onMouseLeave:S},theirProps:s,slot:P,defaultTag:Ie,name:"Menu.Item"})}let ge=$(ce),Re=$(de),be=$(ve),xe=$(ye),ke=Object.assign(ge,{Button:Re,Items:be,Item:xe});export{ke as q};
