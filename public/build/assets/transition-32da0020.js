import{r as n,R as E}from"./app-33bf3152.js";import{a as M,f as _,u as R,s as y,l as Q,O as he,U as J,y as ne,v as $,b as le,o as x,t as re,C as ae}from"./use-is-mounted-f403d620.js";function ie(){let[e]=n.useState(M);return n.useEffect(()=>()=>e.dispose(),[e]),e}let W=n.createContext(null);W.displayName="OpenClosedContext";var T=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(T||{});function se(){return n.useContext(W)}function ge({value:e,children:r}){return E.createElement(W.Provider,{value:e},r)}function be(e=0){let[r,t]=n.useState(e),i=_(),f=n.useCallback(s=>{i.current&&t(l=>l|s)},[r,i]),p=n.useCallback(s=>!!(r&s),[r]),v=n.useCallback(s=>{i.current&&t(l=>l&~s)},[t,i]),c=n.useCallback(s=>{i.current&&t(l=>l^s)},[t]);return{flags:r,addFlag:f,hasFlag:p,removeFlag:v,toggleFlag:c}}function Ee(e){let r={called:!1};return(...t)=>{if(!r.called)return r.called=!0,e(...t)}}function G(e,...r){e&&r.length>0&&e.classList.add(...r)}function K(e,...r){e&&r.length>0&&e.classList.remove(...r)}function Te(e,r){let t=M();if(!e)return t.dispose;let{transitionDuration:i,transitionDelay:f}=getComputedStyle(e),[p,v]=[i,f].map(s=>{let[l=0]=s.split(",").filter(Boolean).map(o=>o.includes("ms")?parseFloat(o):parseFloat(o)*1e3).sort((o,g)=>g-o);return l}),c=p+v;if(c!==0){t.group(l=>{l.setTimeout(()=>{r(),l.dispose()},c),l.addEventListener(e,"transitionrun",o=>{o.target===o.currentTarget&&l.dispose()})});let s=t.addEventListener(e,"transitionend",l=>{l.target===l.currentTarget&&(r(),s())})}else r();return t.add(()=>r()),t.dispose}function Ce(e,r,t,i){let f=t?"enter":"leave",p=M(),v=i!==void 0?Ee(i):()=>{};f==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=R(f,{enter:()=>r.enter,leave:()=>r.leave}),s=R(f,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),l=R(f,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom});return K(e,...r.base,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),G(e,...r.base,...c,...l),p.nextFrame(()=>{K(e,...r.base,...c,...l),G(e,...r.base,...c,...s),Te(e,()=>(K(e,...r.base,...c),G(e,...r.base,...r.entered),v()))}),p.dispose}function Fe({immediate:e,container:r,direction:t,classes:i,onStart:f,onStop:p}){let v=_(),c=ie(),s=y(t);Q(()=>{e&&(s.current="enter")},[e]),Q(()=>{let l=M();c.add(l.dispose);let o=r.current;if(o&&s.current!=="idle"&&v.current)return l.dispose(),f.current(s.current),l.add(Ce(o,i.current,s.current==="enter",()=>{l.dispose(),p.current(s.current)})),l.dispose},[t])}function F(e=""){return e.split(/\s+/).filter(r=>r.length>1)}let A=n.createContext(null);A.displayName="TransitionContext";var Re=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Re||{});function xe(){let e=n.useContext(A);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function we(){let e=n.useContext(B);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let B=n.createContext(null);B.displayName="NestingContext";function q(e){return"children"in e?q(e.children):e.current.filter(({el:r})=>r.current!==null).filter(({state:r})=>r==="visible").length>0}function ue(e,r){let t=y(e),i=n.useRef([]),f=_(),p=ie(),v=x((m,u=$.Hidden)=>{let d=i.current.findIndex(({el:a})=>a===m);d!==-1&&(R(u,{[$.Unmount](){i.current.splice(d,1)},[$.Hidden](){i.current[d].state="hidden"}}),p.microTask(()=>{var a;!q(i)&&f.current&&((a=t.current)==null||a.call(t))}))}),c=x(m=>{let u=i.current.find(({el:d})=>d===m);return u?u.state!=="visible"&&(u.state="visible"):i.current.push({el:m,state:"visible"}),()=>v(m,$.Unmount)}),s=n.useRef([]),l=n.useRef(Promise.resolve()),o=n.useRef({enter:[],leave:[],idle:[]}),g=x((m,u,d)=>{s.current.splice(0),r&&(r.chains.current[u]=r.chains.current[u].filter(([a])=>a!==m)),r==null||r.chains.current[u].push([m,new Promise(a=>{s.current.push(a)})]),r==null||r.chains.current[u].push([m,new Promise(a=>{Promise.all(o.current[u].map(([L,N])=>N)).then(()=>a())})]),u==="enter"?l.current=l.current.then(()=>r==null?void 0:r.wait.current).then(()=>d(u)):d(u)}),b=x((m,u,d)=>{Promise.all(o.current[u].splice(0).map(([a,L])=>L)).then(()=>{var a;(a=s.current.shift())==null||a()}).then(()=>d(u))});return n.useMemo(()=>({children:i,register:c,unregister:v,onStart:g,onStop:b,wait:l,chains:o}),[c,v,i,g,b,o,l])}function Se(){}let $e=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function te(e){var r;let t={};for(let i of $e)t[i]=(r=e[i])!=null?r:Se;return t}function Le(e){let r=n.useRef(te(e));return n.useEffect(()=>{r.current=te(e)},[e]),r}let Ne="div",oe=he.RenderStrategy;function Pe(e,r){var t,i;let{beforeEnter:f,afterEnter:p,beforeLeave:v,afterLeave:c,enter:s,enterFrom:l,enterTo:o,entered:g,leave:b,leaveFrom:m,leaveTo:u,...d}=e,a=n.useRef(null),L=ne(a,r),N=(t=d.unmount)==null||t?$.Unmount:$.Hidden,{show:h,appear:w,initial:X}=xe(),[S,j]=n.useState(h?"visible":"hidden"),Z=we(),{register:D,unregister:H}=Z;n.useEffect(()=>D(a),[D,a]),n.useEffect(()=>{if(N===$.Hidden&&a.current){if(h&&S!=="visible"){j("visible");return}return R(S,{hidden:()=>H(a),visible:()=>D(a)})}},[S,a,D,H,h,N]);let I=y({base:F(d.className),enter:F(s),enterFrom:F(l),enterTo:F(o),entered:F(g),leave:F(b),leaveFrom:F(m),leaveTo:F(u)}),k=Le({beforeEnter:f,afterEnter:p,beforeLeave:v,afterLeave:c}),V=le();n.useEffect(()=>{if(V&&S==="visible"&&a.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[a,S,V]);let de=X&&!w,ee=w&&h&&X,fe=(()=>!V||de?"idle":h?"enter":"leave")(),O=be(0),ve=x(C=>R(C,{enter:()=>{O.addFlag(T.Opening),k.current.beforeEnter()},leave:()=>{O.addFlag(T.Closing),k.current.beforeLeave()},idle:()=>{}})),me=x(C=>R(C,{enter:()=>{O.removeFlag(T.Opening),k.current.afterEnter()},leave:()=>{O.removeFlag(T.Closing),k.current.afterLeave()},idle:()=>{}})),U=ue(()=>{j("hidden"),H(a)},Z),z=n.useRef(!1);Fe({immediate:ee,container:a,classes:I,direction:fe,onStart:y(C=>{z.current=!0,U.onStart(a,C,ve)}),onStop:y(C=>{z.current=!1,U.onStop(a,C,me),C==="leave"&&!q(U)&&(j("hidden"),H(a))})});let P=d,pe={ref:L};return ee?P={...P,className:re(d.className,...I.current.enter,...I.current.enterFrom)}:z.current&&(P.className=re(d.className,(i=a.current)==null?void 0:i.className),P.className===""&&delete P.className),E.createElement(B.Provider,{value:U},E.createElement(ge,{value:R(S,{visible:T.Open,hidden:T.Closed})|O.flags},ae({ourProps:pe,theirProps:P,defaultTag:Ne,features:oe,visible:S==="visible",name:"Transition.Child"})))}function Oe(e,r){let{show:t,appear:i=!1,unmount:f=!0,...p}=e,v=n.useRef(null),c=ne(v,r);le();let s=se();if(t===void 0&&s!==null&&(t=(s&T.Open)===T.Open),![!0,!1].includes(t))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[l,o]=n.useState(t?"visible":"hidden"),g=ue(()=>{o("hidden")}),[b,m]=n.useState(!0),u=n.useRef([t]);Q(()=>{b!==!1&&u.current[u.current.length-1]!==t&&(u.current.push(t),m(!1))},[u,t]);let d=n.useMemo(()=>({show:t,appear:i,initial:b}),[t,i,b]);n.useEffect(()=>{if(t)o("visible");else if(!q(g))o("hidden");else{let h=v.current;if(!h)return;let w=h.getBoundingClientRect();w.x===0&&w.y===0&&w.width===0&&w.height===0&&o("hidden")}},[t,g]);let a={unmount:f},L=x(()=>{var h;b&&m(!1),(h=e.beforeEnter)==null||h.call(e)}),N=x(()=>{var h;b&&m(!1),(h=e.beforeLeave)==null||h.call(e)});return E.createElement(B.Provider,{value:g},E.createElement(A.Provider,{value:d},ae({ourProps:{...a,as:n.Fragment,children:E.createElement(ce,{ref:c,...a,...p,beforeEnter:L,beforeLeave:N})},theirProps:{},defaultTag:n.Fragment,features:oe,visible:l==="visible",name:"Transition"})))}function ye(e,r){let t=n.useContext(A)!==null,i=se()!==null;return E.createElement(E.Fragment,null,!t&&i?E.createElement(Y,{ref:r,...e}):E.createElement(ce,{ref:r,...e}))}let Y=J(Oe),ce=J(Pe),De=J(ye),Ue=Object.assign(Y,{Child:De,Root:Y});export{T as d,ie as p,Ue as q,ge as s,se as u};
